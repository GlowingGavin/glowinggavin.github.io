<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AlienGamer Chess Board</title>
<style>
  body {
    background-color: #202020;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  #board {
    display: grid;
    grid-template-columns: repeat(8, 80px);
    grid-template-rows: repeat(8, 80px);
    border: 4px solid #000;
  }
  .square {
    width: 80px;
    height: 80px;
    display: flex;
    justify-content: center;
    align-items: center;
    user-select: none;
  }
  .light { background: #f0d9b5; }
  .dark { background: #b58863; }
  .piece {
    width: 72px;
    height: 72px;
    cursor: grab;
  }
</style>
</head>
<body>
  <div id="board"></div>

<script>
const board = document.getElementById('board');
const files = ['a','b','c','d','e','f','g','h'];
const ranks = [8,7,6,5,4,3,2,1];

// Basic starting position (FEN layout)
let startPos = {
  a8: 'br', b8: 'bn', c8: 'bb', d8: 'bq', e8: 'bk', f8: 'bb', g8: 'bn', h8: 'br',
  a7: 'bp', b7: 'bp', c7: 'bp', d7: 'bp', e7: 'bp', f7: 'bp', g7: 'bp', h7: 'bp',
  a2: 'wp', b2: 'wp', c2: 'wp', d2: 'wp', e2: 'wp', f2: 'wp', g2: 'wp', h2: 'wp',
  a1: 'wr', b1: 'wn', c1: 'wb', d1: 'wq', e1: 'wk', f1: 'wb', g1: 'wn', h1: 'wr'
};

// Build the board squares
for (let r of ranks) {
  for (let f of files) {
    const square = document.createElement('div');
    square.classList.add('square');
    if ((files.indexOf(f) + ranks.indexOf(r)) % 2 === 0)
      square.classList.add('light');
    else
      square.classList.add('dark');

    const id = f + r;
    square.id = id;

    if (startPos[id]) {
      const img = document.createElement('img');
      img.src = `pieces/${startPos[id]}.png`;
      img.classList.add('piece');
      img.draggable = true;
      square.appendChild(img);
    }
    board.appendChild(square);
  }
}

// Drag-and-drop behavior
let draggedPiece = null;
let sourceSquare = null;

document.addEventListener('dragstart', e => {
  if (e.target.classList.contains('piece')) {
    draggedPiece = e.target;
    sourceSquare = e.target.parentElement;
    setTimeout(() => (e.target.style.visibility = 'hidden'), 0);
  }
});

document.addEventListener('dragend', e => {
  if (draggedPiece) draggedPiece.style.visibility = 'visible';
  draggedPiece = null;
});

document.querySelectorAll('.square').forEach(sq => {
  sq.addEventListener('dragover', e => e.preventDefault());
  sq.addEventListener('drop', e => {
    e.preventDefault();
    if (!draggedPiece) return;
    if (sq !== sourceSquare) {
      // Remove any existing piece (for captures)
      if (sq.firstChild) sq.removeChild(sq.firstChild);
      sq.appendChild(draggedPiece);
    }
  });
});
</script>
</body>
</html>
