<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>AlienGamer Chess — Two Player</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/1.0.0/chess.min.js"></script>
<style>
body{
  background:#111;color:#fff;font-family:Arial;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  min-height:100vh;margin:0;
}
#board{
  display:grid;
  grid-template-columns:repeat(8,80px);
  grid-template-rows:repeat(8,80px);
  border:4px solid #000;
}
.square{width:80px;height:80px;display:flex;justify-content:center;align-items:center;}
.light{background:#f0d9b5;} .dark{background:#b58863;}
.piece{width:72px;height:72px;cursor:grab;}
#turn{margin-top:10px;font-size:1.3rem;}
</style>
</head>
<body>
<div id="board"></div>
<div id="turn">Loading…</div>

<script>
let game = new Chess();
const board = document.getElementById("board");
const turnDisplay = document.getElementById("turn");

function drawBoard(){
  board.innerHTML="";
  const ranks=[8,7,6,5,4,3,2,1],files=["a","b","c","d","e","f","g","h"];
  for(const r of ranks){
    for(const f of files){
      const sq=f+r;
      const div=document.createElement("div");
      div.id=sq;
      div.className="square "+(((files.indexOf(f)+ranks.indexOf(r))%2===0?"light":"dark"));
      const piece=game.get(sq);
      if(piece){
        const img=document.createElement("img");
        img.src=`pieces/${piece.color}${piece.type}.png`;
        img.className="piece";
        img.draggable=true;
        div.appendChild(img);
      }
      board.appendChild(div);
    }
  }
  turnDisplay.textContent=(game.turn()==="w")?"White to move":"Black to move";
  enableDragDrop();
}

function enableDragDrop(){
  let dragged=null,source=null;
  document.querySelectorAll(".piece").forEach(p=>{
    p.addEventListener("dragstart",e=>{
      source=e.target.parentElement.id;
      dragged=e.target;
      setTimeout(()=>dragged.style.visibility="hidden",0);
    });
    p.addEventListener("dragend",()=>{dragged.style.visibility="visible";dragged=null;});
  });
  document.querySelectorAll(".square").forEach(sq=>{
    sq.addEventListener("dragover",e=>e.preventDefault());
    sq.addEventListener("drop",e=>{
      e.preventDefault();
      const target=e.target.closest(".square").id;
      if(!source)return;
      const move=game.move({from:source,to:target,promotion:"q"});
      if(move){
        drawBoard();
      }
      source=null;
    });
  });
}

window.addEventListener("load",drawBoard);
</script>
</body>
</html>
